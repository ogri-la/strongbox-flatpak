app-id: la.ogri.strongbox
runtime: org.freedesktop.Platform
runtime-version: '23.08'
sdk: org.freedesktop.Sdk
sdk-extensions: 
    - org.freedesktop.Sdk.Extension.openjdk11

command: strongbox
modules:
    - name: openjdk
      buildsystem: simple
      build-commands:
        - /usr/lib/sdk/openjdk11/install.sh

    - name: strongbox
      buildsystem: simple
      sources:
        - type: file
          url: https://github.com/ogri-la/strongbox/releases/download/7.0.0/strongbox-7.0.0-standalone.jar
          sha256: c2c254599773a3d16a1676da107a12000f592d1ceddb624ffd4ef918d1fd849d
          dest-filename: app.jar
        
        - type: script
          commands:
            - /app/jre/bin/java -jar /app/bin/app.jar "$@"
        
        - type: file
          path: la.ogri.strongbox.metainfo.xml
          #url: https://raw.githubusercontent.com/ogri-la/strongbox-flatpak/0.0.1/la.ogri.strongbox.metainfo.xml
          #sha256:
          
        - type: file
          path: strongbox.desktop
          #url: https://raw.githubusercontent.com/ogri-la/strongbox-flatpak/0.0.1/strongbox.desktop
          #sha256:
        
        - type: file
          path: strongbox.svg
          #url: https://raw.githubusercontent.com/ogri-la/strongbox-flatpak/0.0.1/strongbox.svg
          #sha256:

      build-commands:
        - install -D la.ogri.strongbox.metainfo.xml /app/share/metainfo/la.ogri.strongbox.metainfo.xml
        - install -D -m755 autogen.sh /app/bin/strongbox
        - install -D app.jar /app/bin/app.jar

finish-args:
    - "--socket=x11"
    - "--share=network"
    - "--device=dri"
    - "--filesystem=host"

